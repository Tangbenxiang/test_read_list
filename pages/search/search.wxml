<!-- pages/search/search.wxml - ç®€åŒ–ç‰ˆ -->
<view class="container page-content">
  <!-- æœç´¢æ¡† -->
  <view class="search-box">
    <view class="search-input-wrapper">
      <view class="search-icon">ğŸ”</view>
      <input
        class="search-input"
        placeholder="æœç´¢ä¹¦åã€ä½œè€…æˆ–ç±»å‹"
        placeholder-class="placeholder"
        value="{{keyword}}"
        bindinput="onInput"
        bindconfirm="onSearch"
        focus="{{true}}"
      />
    </view>
    <view class="search-btn" bindtap="onSearch">æœç´¢</view>
  </view>

  <!-- æœç´¢ç»“æœåŒºåŸŸ -->
  <view class="search-results">
    <!-- åŠ è½½æç¤º -->
    <view wx:if="{{loading}}" class="loading">
      <view class="loading-icon">â³</view>
      <text>æœç´¢ä¸­...</text>
    </view>

    <!-- æœç´¢ç»“æœåˆ—è¡¨ -->
    <view wx:if="{{!loading && results.length > 0}}">
      <view class="results-header">
        <text class="results-title">æœç´¢ç»“æœ</text>
        <text class="results-count">{{results.length}}æ¡</text>
      </view>

      <view class="results-list">
        <block wx:for="{{results}}" wx:key="_id">
          <view class="result-item" bindtap="goToDetail" data-id="{{item._id}}">
            <view class="result-header">
              <text class="result-title">{{item.title}}</text>
              <view class="result-status">
                <text wx:if="{{item.purchased}}" class="status-icon purchased">âœ“</text>
                <text wx:if="{{item.read}}" class="status-icon read">ğŸ‘</text>
                <text wx:if="{{item.intensiveRead}}" class="status-icon intensive">â˜…</text>
              </view>
            </view>
            <text class="result-author">{{item.author}}</text>
            <text class="result-type">{{item.type}} Â· {{item.gradeLevel}}</text>
            <text class="result-desc">{{item.description || 'æš‚æ— ç®€ä»‹'}}</text>
          </view>
        </block>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{!loading && results.length === 0 && keyword}}" class="empty">
      <view class="empty-icon">ğŸ”</view>
      <text class="empty-text">æœªæ‰¾åˆ°ç›¸å…³ä¹¦ç±</text>
      <text class="empty-desc">æ¢ä¸ªå…³é”®è¯è¯•è¯•å§</text>
    </view>

    <!-- åˆå§‹çŠ¶æ€ -->
    <view wx:if="{{!loading && results.length === 0 && !keyword}}" class="empty">
      <view class="empty-icon">ğŸ”</view>
      <text class="empty-text">è¾“å…¥å…³é”®è¯æœç´¢ä¹¦ç±</text>
      <text class="empty-desc">æ”¯æŒä¹¦åã€ä½œè€…ã€ç±»å‹æœç´¢</text>
    </view>
  </view>
</view>