<!-- pages/detail/detail.wxml -->
<view class="container page-content">
  <!-- ä¹¦ç±å°é¢å’Œæ ‡é¢˜ -->
  <view class="book-header">
    <view class="book-cover">
      <image src="{{book.cover || '/images/default-cover.png'}}" mode="aspectFill"></image>
    </view>
    <view class="book-header-info">
      <text class="book-title">{{book.title}}</text>
      <text class="book-author">{{book.author}}</text>
      <view class="book-tags">
        <text class="book-tag">{{book.type}}</text>
        <text class="book-tag">{{book.gradeLevel}}</text>
      </view>
    </view>
  </view>

  <!-- çŠ¶æ€åˆ‡æ¢ -->
  <view class="status-section">
    <text class="section-title">é˜…è¯»çŠ¶æ€</text>
    <view class="status-buttons">
      <view
        class="status-btn {{book.purchased ? 'active' : ''}}"
        bindtap="togglePurchased"
      >
        <view class="status-icon purchased">{{book.purchased ? 'âœ“' : '+'}}</view>
        <text class="status-text">å·²è´­ä¹°</text>
      </view>
      <view
        class="status-btn {{book.read ? 'active' : ''}}"
        bindtap="toggleRead"
      >
        <view class="status-icon read">{{book.read ? 'ğŸ‘' : 'ğŸ‘'}}</view>
        <text class="status-text">å·²é˜…è¯»</text>
      </view>
      <view
        class="status-btn {{book.intensiveRead ? 'active' : ''}}"
        bindtap="toggleIntensive"
      >
        <view class="status-icon intensive">{{book.intensiveRead ? 'â­' : 'â˜†'}}</view>
        <text class="status-text">å·²ç²¾è¯»</text>
      </view>
    </view>
    <text class="status-hint">ç‚¹å‡»çŠ¶æ€å›¾æ ‡åˆ‡æ¢</text>
  </view>

  <!-- ä¹¦ç±ä¿¡æ¯ -->
  <view class="info-section">
    <text class="section-title">ä¹¦ç±ä¿¡æ¯</text>
    <view class="info-grid">
      <view class="info-item">
        <text class="info-label">åºå·ï¼š</text>
        <text class="info-value">{{book.serial}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">ç±»å‹ï¼š</text>
        <text class="info-value">{{book.type}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">ä½œè€…ï¼š</text>
        <text class="info-value">{{book.author}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">å¹´çº§ï¼š</text>
        <text class="info-value">{{book.gradeLevel}}</text>
      </view>
    </view>
  </view>

  <!-- ä¹¦ç±ç®€ä»‹ -->
  <view class="description-section">
    <text class="section-title">å†…å®¹ç®€ä»‹</text>
    <view class="description-content">
      <text>{{book.description || 'æš‚æ— ç®€ä»‹'}}</text>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <view class="action-btn share-btn" bindtap="shareBook">
      <view class="action-icon">ğŸ“¤</view>
      <text>åˆ†äº«</text>
    </view>
    <view class="action-btn back-btn" bindtap="goBack">
      <view class="action-icon">â†</view>
      <text>è¿”å›åˆ—è¡¨</text>
    </view>
  </view>

  <!-- åŠ è½½æç¤º -->
  <view wx:if="{{loading}}" class="loading">åŠ è½½ä¸­...</view>
</view>